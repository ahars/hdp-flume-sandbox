########## Agent 1 ##########
agent_15_1.sources = log_dir_src
agent_15_1.channels = tmp_1_ch tmp_rejet_ch
agent_15_1.sinks = tmp_1_sk tmp_rejet_sk


## Agent 1 Sources ##
agent_15_1.sources.log_dir_src.channels = tmp_1_ch tmp_rejet_ch
agent_15_1.sources.log_dir_src.interceptors = itime icat
agent_15_1.sources.log_dir_src.type = spooldir
agent_15_1.sources.log_dir_src.spoolDir = data/input


## Agent 1 Channels ##
agent_15_1.channels.tmp_1_ch.type = memory
agent_15_1.channels.tmp_1_ch.capacity = 1000
agent_15_1.channels.tmp_1_ch.transactionCapacity = 100

agent_15_1.channels.tmp_rejet_ch.type = memory
agent_15_1.channels.tmp_rejet_ch.capacity = 1000
agent_15_1.channels.tmp_rejet_ch.transactionCapacity = 100


## Agent 1 Sinks ##
agent_15_1.sinks.tmp_1_sk.type = avro
agent_15_1.sinks.tmp_1_sk.channel = tmp_1_ch
agent_15_1.sinks.tmp_1_sk.hostname = 0.0.0.0
agent_15_1.sinks.tmp_1_sk.port = 4141

agent_15_1.sinks.tmp_rejet_sk.type = hdfs
agent_15_1.sinks.tmp_rejet_sk.channel = tmp_rejet_ch
agent_15_1.sinks.tmp_rejet_sk.hdfs.path = data/REJECTED/
agent_15_1.sinks.tmp_rejet_sk.hdfs.filePrefix = rejet-tmp-%Y%m%d
agent_15_1.sinks.tmp_rejet_sk.hdfs.fileSuffix = .csv
agent_15_1.sinks.tmp_rejet_sk.hdfs.fileType = DataStream
agent_15_1.sinks.tmp_rejet_sk.hdfs.writeFormat = Text
agent_15_1.sinks.tmp_rejet_sk.batchSize = 10000
agent_15_1.sinks.tmp_rejet_sk.serializer = org.apache.flume.serialization.FlumeEventCSVSerializer$Builder
agent_15_1.sinks.tmp_rejet_sk.serializer.format = CSV
agent_15_1.sinks.tmp_rejet_sk.serializer.category = 0


## Agent 1 Interceptors ##
agent_15_1.sources.log_dir_src.interceptors.itime.type = timestamp

agent_15_1.sources.log_dir_src.interceptors.icat.type = regex_extractor
agent_15_1.sources.log_dir_src.interceptors.icat.regex = ^.+\\[((.+):.+:.+:.+)\\]\\s"(\\w+)\\s\\S+\\/(\\w+)\\s\\S+\\s(\\d+)\\s(\\d+)
agent_15_1.sources.log_dir_src.interceptors.icat.excludeEvents = false
agent_15_1.sources.log_dir_src.interceptors.icat.serializers = s1 s2 s3 s4
agent_15_1.sources.log_dir_src.interceptors.icat.serializers.s1.name = cat_1
agent_15_1.sources.log_dir_src.interceptors.icat.serializers.s2.name = cat_2
agent_15_1.sources.log_dir_src.interceptors.icat.serializers.s3.name = cat_3
agent_15_1.sources.log_dir_src.interceptors.icat.serializers.s4.name = cat_4

agent_15_1.sources.log_dir_src.selector.type = multiplexing
agent_15_1.sources.log_dir_src.selector.header = cat_4
agent_15_1.sources.log_dir_src.selector.mapping.feeding = tmp_1_ch
agent_15_1.sources.log_dir_src.selector.default = tmp_rejet_ch

##########################################################################################################

########## Agent 2 ##########
agent_15_2.sources = tmp_1_src
agent_15_2.channels = dest_1_ch rejet_ch
agent_15_2.sinks = dest_1_sk rejet_sk


## Agent 2 Sources ##
agent_15_2.sources.tmp_1_src.type = avro
agent_15_2.sources.tmp_1_src.channels = dest_1_ch rejet_ch
agent_15_2.sources.tmp_1_src.bind = 0.0.0.0
agent_15_2.sources.tmp_1_src.port = 4141


## Agent 2 Channels ##
agent_15_2.channels.dest_1_ch.type = memory
agent_15_2.channels.dest_1_ch.capacity = 1000
agent_15_2.channels.dest_1_ch.transactionCapacity = 100

agent_15_2.channels.rejet_ch.type = memory
agent_15_2.channels.rejet_ch.capacity = 1000
agent_15_2.channels.rejet_ch.transactionCapacity = 100


## Agent 2 sinks ##
agent_15_2.sinks.dest_1_sk.type = hdfs
agent_15_2.sinks.dest_1_sk.channel = dest_1_ch
agent_15_2.sinks.dest_1_sk.hdfs.path = data/ACCEPTED/
agent_15_2.sinks.dest_1_sk.hdfs.filePrefix = dest_1-%Y%m%d
agent_15_2.sinks.dest_1_sk.hdfs.fileSuffix = .csv
agent_15_2.sinks.dest_1_sk.hdfs.fileType = DataStream
agent_15_2.sinks.dest_1_sk.hdfs.writeFormat = Text
agent_15_2.sinks.dest_1_sk.batchSize = 10000
agent_15_2.sinks.dest_1_sk.serializer = org.apache.flume.serialization.FlumeEventCSVSerializer$Builder
agent_15_2.sinks.dest_1_sk.serializer.format = CSV
agent_15_2.sinks.dest_1_sk.serializer.category = 1
agent_15_2.sinks.dest_1_sk.serializer.regexorder = 1 2 3 4 5 6
agent_15_2.sinks.dest_1_sk.serializer.regex = ^.+\\[((.+):.+:.+:.+)\\]\\s"(\\w+)\\s\\S+\\/(\\w+)\\s\\S+\\s(\\d+)\\s(\\d+)

agent_15_2.sinks.rejet_sk.type = hdfs
agent_15_2.sinks.rejet_sk.channel = rejet_ch
agent_15_2.sinks.rejet_sk.hdfs.path = data/REJECTED/
agent_15_2.sinks.rejet_sk.hdfs.filePrefix = rejet-dest_1-%Y%m%d
agent_15_2.sinks.rejet_sk.hdfs.fileSuffix = .csv
agent_15_2.sinks.rejet_sk.hdfs.fileType = DataStream
agent_15_2.sinks.rejet_sk.hdfs.writeFormat = Text
agent_15_2.sinks.rejet_sk.batchSize = 10000
agent_15_2.sinks.rejet_sk.serializer = org.apache.flume.serialization.FlumeEventCSVSerializer$Builder
agent_15_2.sinks.rejet_sk.serializer.format = CSV
agent_15_2.sinks.rejet_sk.serializer.category = 0

